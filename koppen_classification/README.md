# Koppen-geiger classification project for Geomatics Masters Programme NGEA12

The aim and goal of this project was to make a worldwide Koppen-Geiger classification, based on climate normal means for given timespans 1971-2000 and 2091-2100, for comparing and assessing changes in climate zones around the globe. A secondary goal was to create coffee zones 
The scripts combine modules Arcpy (ArcGIS Pro), Numpy and multiprocessing for calculations and reading files. In addition to modules os, tqdm, datetime and shutil for the ease of the workflow. 

means.py script calculates the mean value of an indicated timespan (creating the climate normals for the classification.py script input) using two NC files, ideally from CMIP6, belonging a same experiment and realization, one NC file must contain temperature data in Kelvin and the second NC file contain precipitation data in kgm-2s-1. The user only need to change the parameters path, in_netcdf1, in_netcdf2 (pointing to the NC files), endString (for writing the result), yearSpan, start and finish (integers used for the timespan). From within the means.py script, the writeMetadata.py script is called, for writing in new txt files relevant metadata for each of the NC files.
![historical temperature data screenshot of MRI-ESM2.0 (2)](img/nc.png)
classification.py read the climate normals created using means.py and classify (based on Beck et al. (2018) parameters [1] and variable thresholds) each of the cells into different climate zones, creating a TIF raster as output. The user only needs to input the variables path, ts_file (temperature txt), pr_file (precipitation txt) and in_netcdf (for geometry information).
interpol.py is used instead of classification.py if an interpolation is required for the output, using the same inputs as classification.py, and additionally indicating a scaling integer and method, can be based on the txt as rasters (CUBIC, NEAREST, BILINEAR or MAJORITY) or on points (NNeighbor, IDW, spline or kriging), the latest requires a shapefile with the location of the poitns to use, they can be generated using the writePoints.py script, which uses one of the NC files as geometry input and its resolution must be indicated too, besides, a land_mask shapefile is recommended, because interpolating values in the ocean is not recommended, I used Natural Earth [2] public domain vectors.
In both classification.py and interpol.py the methods for classifying climate zones (koppen_beck) and coffee growing zones (coffee) were created as functions, that can be changed in the map calls.
The results are not masked as default, using Natural Earth ocean mask vectors was a great way to get the desired results.
![Koppen classification](img/koppen.png)

References 
1. Beck, H.E., N.E. Zimmermann, T.R. McVicar, N. Vergopolan, A. Berg, and E.F. Wood. 2018. Present and future KÃ¶ppen-Geiger climate classification maps at 1-km resolution. Scientific Data 5: 180214. doi: 10.1038/sdata.2018.214
2. Yukimoto, S., T, Koshiro, H, Kawai, N. Oshima, K. Yoshida, S. Urakawa, H. Tsujino, M. Deushi et al. 2019. MRI MRI-ESM2.0 model output prepared for CMIP6 CMIP historical. Version 2019022. Earth System Grid Federation. doi: 10.22033/ESGF/CMIP6.6842
3. https://www.naturalearthdata.com/downloads/10m-physical-vectors/10m-land/